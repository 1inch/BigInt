<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BigInt  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>


    <a title="BigInt  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          BigInt Docs
        </a>
         (70% documented)
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/lorentey/BigInt">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Florentey%2Egithub%2Eio%2FBigInt%2Freference%2Fdocsets%2FBigInt%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">BigInt Reference</a>
      <img class="carat" src="img/carat.png" />
      BigInt  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1rFTVS_6BigIntS0__S0_">%(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1rFTVS_7BigUIntS0__S0_">%(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2reFTRVS_6BigIntS0__T_">%=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2reFTRVS_7BigUIntS0__T_">%=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1aFTVS_7BigUIntS0__S0_">&amp;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2aeFTRVS_7BigUIntS0__T_">&amp;=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1mFTVS_6BigIntS0__S0_">*(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1mFTVS_7BigUIntS0__S0_">*(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2meFTRVS_6BigIntS0__T_">*=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2meFTRVS_7BigUIntS0__T_">*=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1pFTVS_7BigUIntS0__S0_">+(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1pFTVS_6BigIntS0__S0_">+(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2peFTRVS_7BigUIntS0__T_">+=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2peFTRVS_6BigIntS0__T_">+=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntop1sFVS_6BigIntS0_">-(_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1sFTVS_6BigIntS0__S0_">-(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1sFTVS_7BigUIntS0__S0_">-(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2seFTRVS_7BigUIntS0__T_">-=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2seFTRVS_6BigIntS0__T_">-=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1dFTVS_6BigIntS0__S0_">/(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1dFTVS_7BigUIntS0__S0_">/(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2deFTRVS_7BigUIntS0__T_">/=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2deFTRVS_6BigIntS0__T_">/=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1lFTVS_7BigUIntS0__Sb">&lt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1lFTVS_6BigIntS0__Sb">&lt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2llFTVS_7BigUIntSi_S0_">&lt;&lt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi3lleFTRVS_7BigUIntSi_T_">&lt;&lt;=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2eeFTVS_6BigIntS0__Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2eeFTVS_7BigUIntS0__Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2ggFTVS_7BigUIntSi_S0_">&gt;&gt;(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi3ggeFTRVS_7BigUIntSi_T_">&gt;&gt;=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1xFTVS_7BigUIntS0__S0_">^(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2xeFTRVS_7BigUIntS0__T_">^=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F6BigInt4sqrtFVS_7BigUIntS0_">sqrt(_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi1oFTVS_7BigUIntS0__S0_">|(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntoi2oeFTRVS_7BigUIntS0__T_">|=(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:ZF6BigIntop1tFVS_7BigUIntS0_">~(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ShiftOperationsType.html">ShiftOperationsType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BigInt.html">BigInt</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/BigUInt.html">BigUInt</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DigitGenerator.html">DigitGenerator</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <a href='#bigint' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='bigint'>BigInt</h1>

<p>This repository provides <a href="https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic">integer types of arbitrary width</a> implemented
in pure Swift. The representation is in base 2^64, using <code>Array&lt;UInt64&gt;</code>.</p>

<p>This module is handy when you need an integer type that&rsquo;s wider than <code>UIntMax</code>, but 
you don&rsquo;t want to add <a href="https://gmplib.org">The GNU Multiple Precision Arithmetic Library</a> 
as a dependency.</p>

<p>Two big integer types are included: <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html"><code>BigUInt</code></a> and <a href="http://lorentey.github.io/BigInt/api/Structs/BigInt.html"><code>BigInt</code></a>, 
the latter being the signed variant.
Both of these are Swift structs with copy-on-write value semantics, and they can be used much 
like any other integer type.</p>

<p>The library provides implementations for some of the most frequently useful functions on 
big integers, including</p>

<ul>
<li><p>All functionality from <a href="http://lorentey.github.io/BigInt/api/Functions.html#/Comparison"><code>Comparable</code></a> and <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Hashing"><code>Hashable</code></a></p></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Addition">The full set of arithmetic operators</a>: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>+=</code>, <code>-=</code>, <code>*=</code>, <code>/=</code>, <code>%=</code></p>

<ul>
<li><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Addition">Addition</a> and <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Subtraction">subtraction</a> have variants that allow for 
shifting the digits of the second operand on the fly.</li>
<li>Unsigned subtraction will trap when the result would be negative. 
(<a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Subtraction">There are variants</a> that return an overflow flag.)</li>
<li><a href="http://lorentey.github.io/BigInt/api/Functions.html#/s:ZF6BigIntoi1mFTVS_7BigUIntS0__S0_">Multiplication</a> uses brute force for numbers up to 1024 digits, then switches to Karatsuba&rsquo;s recursive method. 
(This limit is configurable, see <code>BigUInt.directMultiplicationLimit</code>.)</li>
<li>A <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:FV6BigInt7BigUInt21multiplyAndAddInPlaceFRS0_FTS0_VSs6UInt645shiftSi_T_">fused multiply-add</a> method is also available, along with other <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/Multiplication">special-case variants</a>.</li>
<li>Division uses Knuth&rsquo;s Algorithm D, with its 3/2 digits wide quotient approximation. 
It will trap when the divisor is zero. <code>BigUInt.divmod</code> returns the quotient and
remainder at once; this is faster than calculating them separately.</li>
</ul></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Functions.html#/Bitwise%20Operators">Bitwise operators</a>: <code>~</code>, <code>|</code>, <code>&amp;</code>, <code>^</code>, <code>|=</code>, <code>&amp;=</code>, <code>^=</code>, plus the following read-only properties:</p>

<ul>
<li><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:vV6BigInt7BigUInt5widthSi"><code>width</code></a>: the minimum number of bits required to store the integer,</li>
<li><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:vV6BigInt7BigUInt14trailingZeroesSi"><code>trailingZeroes</code></a>: the number of trailing zero bits in the binary representation,</li>
<li><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:vV6BigInt7BigUInt13leadingZeroesSi"><code>leadingZeroes</code></a>: the number of leading zero bits (when the last digit isn&rsquo;t full),</li>
</ul></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Functions.html#/Shift%20Operators">Shift operators</a>: <code>&gt;&gt;</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;=</code>, <code>&lt;&lt;=</code></p></li>
<li><p>Radix conversion to/from <a href="http://lorentey.github.io/BigInt/api/Extensions/String.html#/s:FE6BigIntSScFMSSFTVS_7BigUInt5radixSi9uppercaseSb_SS"><code>String</code>s</a> and <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:FV6BigInt7BigUIntcFMS0_FTSS5radixSi_GSqS0__">big integers</a> up to base 36 (using repeated divisions).</p>

<ul>
<li>Big integers use this to implement <code>StringLiteralConvertible</code> (in base 10).</li>
</ul></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Functions.html#/s:F6BigInt4sqrtFVS_7BigUIntS0_"><code>sqrt(n)</code></a>: The square root of an integer (using Newton&rsquo;s method).</p></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:ZFV6BigInt7BigUInt3gcdFMS0_FTS0_S0__S0_"><code>BigUInt.gcd(n, m)</code></a>: The greatest common divisor of two integers (Stein&rsquo;s algorithm).</p></li>
<li><p><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html#/s:ZFV6BigInt7BigUInt6powmodFMS0_FTS0_S0_7modulusS0__S0_"><code>BigUInt.powmod(base, exponent, modulus)</code></a>: Modular exponentiation (right-to-left binary method).</p></li>
</ul>

<p>The implementations are intended to be reasonably efficient, but they are unlikely to be
competitive with GMP at all, even when I happened to implement an algorithm with same asymptotic
behavior as GMP. (I haven&rsquo;t performed a comparison benchmark, though.)</p>

<p>The library has 100% unit test coverage.</p>
<a href='#api_documentation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='api_documentation'>API Documentation</h2>

<p>Generated API docs are available at <a href="http://lorentey.github.io/BigInt/api">http://lorentey.github.io/BigInt/api</a>.</p>
<a href='#implementation_notes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='implementation_notes'>Implementation notes</h2>

<p>I haven&rsquo;t found (64,64)-&gt;128 multiplication or (128,64)-&gt;64 division operations in Swift, so 
the module has implementations for those in terms of the standard single-width <code>*</code> and <code>/</code> 
operators. (I suspect there are LLVM intrinsics for double-width arithmetics that are probably
accessible somehow, though.) This sounds slow, but 64-bit digits are still considerably faster
than 32-bit, even though the latter can use direct 64-bit arithmetic to implement these primitives.</p>

<p><a href="http://lorentey.github.io/BigInt/api/Structs/BigInt.html"><code>BigInt</code></a> consists of an <a href="http://lorentey.github.io/BigInt/api/Structs/BigInt.html#/s:vV6BigInt6BigInt3absVS_7BigUInt">absolute value</a> and a <a href="http://lorentey.github.io/BigInt/api/Structs/BigInt.html#/s:vV6BigInt6BigInt8negativeSb">sign bit</a>, both of which are accessible as public read-write properties. </p>

<p><a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html"><code>BigUInt</code></a> is a <code>MutableCollectionType</code> of its 64-bit digits, with the least significant 
digit at index 0. As a convenience, <a href="http://lorentey.github.io/BigInt/api/Structs/BigUInt.html"><code>BigUInt</code></a> allows you to subscript it with indexes at
or above its <code>count</code>. <a href="https://github.com/lorentey/BigInt/blob/master/Sources/BigUInt.swift#L127-L150">The subscript operator</a> returns 0 for out-of-bound <code>get</code>s and
automatically extends the array on out-of-bound <code>set</code>s. This makes memory management simpler.</p>
<a href='#why_is_there_no_generic_code_bigint_lt_digit_gt_code_type' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='why_is_there_no_generic_code_bigint_lt_digit_gt_code_type'>Why is there no generic <code>BigInt&lt;Digit&gt;</code> type?</h2>

<p>The types provided by <code>BigInt</code> are not parametric&mdash;this is very much intentional, as 
Swift 2.2.1 generics cost us dearly at runtime in this use case. In every approach I tried,
making arbitrary-precision arithmetic operations work with a generic <code>Digit</code> type parameter 
resulted in code that was literally <em>ten times slower</em>.</p>

<p>This is an area that I plan to investigate more, as it would be useful to have generic
implementations for arbitrary-width arithmetic operations. (Polynomial division and decimal bases
are two examples.) The library already implements double-digit multiplication and division as 
extension methods on a protocol with an associated type requirement; this has not measurably affected
performance. Unfortunately, the same is not true for <code>BigUInt</code>&rsquo;s methods.</p>

<p>Of course, as a last resort, we could just duplicate the code to create a separate
generic variant that was slower but more flexible.</p>
<a href='#obligatory_demonstration_with_a_factorial_function' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='obligatory_demonstration_with_a_factorial_function'>Obligatory demonstration with a factorial function</h2>
<pre class="highlight plaintext"><code>import BigInt

func factorial(n: Int) -&gt; BigInt {
    guard n &gt; 1 else { return 1 }
    var result: BigInt = 1    
    for i in 2...n {
        result *= Digit(i)
    }
    return result
}

print(factorial(10))
362880

print(factorial(100))
93326215443944152681699238856266700490715968264381621468592963895217599993229915
6089414639761565182862536979208272237582511852109168640000000000000000000000

print(factorial(1000))
40238726007709377354370243392300398571937486421071463254379991042993851239862902
05920442084869694048004799886101971960586316668729948085589013238296699445909974
24504087073759918823627727188732519779505950995276120874975462497043601418278094
64649629105639388743788648733711918104582578364784997701247663288983595573543251
31853239584630755574091142624174743493475534286465766116677973966688202912073791
43853719588249808126867838374559731746136085379534524221586593201928090878297308
43139284440328123155861103697680135730421616874760967587134831202547858932076716
91324484262361314125087802080002616831510273418279777047846358681701643650241536
91398281264810213092761244896359928705114964975419909342221566832572080821333186
11681155361583654698404670897560290095053761647584772842188967964624494516076535
34081989013854424879849599533191017233555566021394503997362807501378376153071277
61926849034352625200015888535147331611702103968175921510907788019393178114194545
25722386554146106289218796022383897147608850627686296714667469756291123408243920
81601537808898939645182632436716167621791689097799119037540312746222899880051954
44414282012187361745992642956581746628302955570299024324153181617210465832036786
90611726015878352075151628422554026517048330422614397428693306169089796848259012
54583271682264580665267699586526822728070757813918581788896522081643483448259932
66043367660176999612831860788386150279465955131156552036093988180612138558600301
43569452722420634463179746059468257310379008402443243846565724501440282188525247
09351906209290231364932734975655139587205596542287497740114133469627154228458623
77387538230483865688976461927383814900140767310446640259899490222221765904339901
88601856652648506179970235619389701786004081188972991831102117122984590164192106
88843871218556461249607987229085192968193723886426148396573822911231250241866493
53143970137428531926649875337218940694281434118520158014123344828015051399694290
15348307764456909907315243327828826986460278986432113908350621709500259738986355
42771967428222487575867657523442202075736305694988250879689281627538488633969099
59826280956121450994871701244516461260379029309120889086942028510640182154399457
15680594187274899809425474217358240106367740459574178516082923013535808184009699
63725242305608559037006242712434169090041536901059339838357779394109700277534720
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2016 <a class="link" href="https://twitter.com/lorentey" target="_blank" rel="external">Károly Lőrentey</a>. All rights reserved. (Last updated: 2016-01-04)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.5.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
